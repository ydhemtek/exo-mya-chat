{"ast":null,"code":"var _jsxFileName = \"/home/mehdycament/Bureau/app_message_symfony/chat-page/src/contexts/ChatContext.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useEffect, useContext, useCallback } from 'react';\nimport { AuthContext } from './AuthContext';\nimport io from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ChatContext = /*#__PURE__*/createContext();\n\n// URL du serveur socket.io\nconst SOCKET_URL = 'http://localhost:5001';\nlet socket;\nexport const ChatProvider = ({\n  children\n}) => {\n  _s();\n  const {\n    currentUser\n  } = useContext(AuthContext);\n  const [onlineUsers, setOnlineUsers] = useState([]);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [connected, setConnected] = useState(false);\n\n  // Fonction pour se connecter au serveur socket\n  const connectSocket = useCallback(() => {\n    if (!socket) {\n      console.log('Initialisation de la connexion socket...');\n      socket = io(SOCKET_URL, {\n        reconnectionAttempts: 5,\n        reconnectionDelay: 1000,\n        timeout: 10000\n      });\n\n      // Ecouter la connexion\n      socket.on('connect', () => {\n        console.log('Connecté au serveur socket avec id:', socket.id);\n        setConnected(true);\n      });\n\n      // Ecouter les erreurs de connexion\n      socket.on('connect_error', error => {\n        console.error('Erreur de connexion socket:', error);\n      });\n\n      // Ecouter la déconnexion\n      socket.on('disconnect', reason => {\n        console.log('Déconnecté du serveur socket. Raison:', reason);\n        setConnected(false);\n      });\n    }\n  }, []);\n\n  // Établir la connexion socket quand l'utilisateur est connecté\n  useEffect(() => {\n    if (currentUser) {\n      // Établir la connexion au serveur socket\n      connectSocket();\n      if (socket) {\n        // Enregistrer l'utilisateur sur le serveur\n        console.log('Enregistrement de l\\'utilisateur:', currentUser);\n        socket.emit('register', {\n          ...currentUser,\n          socketId: socket.id\n        });\n\n        // Configurer les écouteurs d'événements\n\n        // Écouter les mises à jour des utilisateurs en ligne\n        socket.on('users_update', users => {\n          console.log('Utilisateurs en ligne reçus:', users);\n          if (Array.isArray(users)) {\n            // Filtrer pour exclure l'utilisateur courant\n            const otherUsers = users.filter(user => user.id !== currentUser.id && user.isOnline);\n            console.log('Autres utilisateurs filtrés:', otherUsers);\n            setOnlineUsers(otherUsers);\n          } else {\n            console.error('Format incorrect pour users_update, attendu tableau, reçu:', typeof users);\n          }\n        });\n\n        // Écouter les nouveaux messages\n        socket.on('new_message', message => {\n          console.log('Nouveau message reçu:', message);\n          setMessages(prevMessages => [...prevMessages, message]);\n        });\n\n        // Confirmation d'envoi de message\n        socket.on('message_sent', message => {\n          console.log('Confirmation de message envoyé:', message);\n          setMessages(prevMessages => prevMessages.map(msg => msg.id === message.id ? message : msg));\n        });\n\n        // Écouter les nouvelles réactions\n        socket.on('new_reaction', data => {\n          console.log('Nouvelle réaction reçue:', data);\n          setMessages(prevMessages => prevMessages.map(msg => msg.id === data.messageId ? {\n            ...msg,\n            reactions: [...(msg.reactions || []), {\n              reaction: data.reaction,\n              userId: data.userId\n            }]\n          } : msg));\n        });\n\n        // Écouter les nouvelles réponses\n        socket.on('new_reply', data => {\n          console.log('Nouvelle réponse reçue:', data);\n          setMessages(prevMessages => prevMessages.map(msg => msg.id === data.messageId ? {\n            ...msg,\n            replies: [...(msg.replies || []), data.reply]\n          } : msg));\n        });\n      }\n    }\n    return () => {\n      if (socket) {\n        console.log('Nettoyage des écouteurs d\\'événements socket');\n        socket.off('users_update');\n        socket.off('new_message');\n        socket.off('message_sent');\n        socket.off('new_reaction');\n        socket.off('new_reply');\n      }\n    };\n  }, [currentUser, connectSocket]);\n\n  // Charger les messages lorsqu'un utilisateur est sélectionné\n  useEffect(() => {\n    if (selectedUser) {\n      console.log('Utilisateur sélectionné:', selectedUser);\n      setLoading(true);\n      setMessages([]); // Réinitialiser les messages\n\n      // Demander les messages précédents au serveur\n      if (socket && connected) {\n        socket.emit('get_messages', {\n          sender: currentUser.id,\n          receiver: selectedUser.id\n        });\n      }\n      setLoading(false);\n    }\n  }, [selectedUser, currentUser, socket, connected]);\n\n  // Demander explicitement la liste des utilisateurs\n  const fetchUsers = useCallback(async () => {\n    console.log('Récupération des utilisateurs...');\n    if (socket && connected) {\n      socket.emit('get_users');\n      console.log('Demande de liste d\\'utilisateurs envoyée');\n    }\n    return onlineUsers;\n  }, [onlineUsers, socket, connected]);\n\n  // Envoyer un message\n  const handleSendMessage = useCallback(async content => {\n    if (!selectedUser || !currentUser) {\n      console.error('Impossible d\\'envoyer un message: pas d\\'utilisateur sélectionné ou courant');\n      return;\n    }\n    console.log('Envoi d\\'un message à:', selectedUser.username);\n    try {\n      const newMessage = {\n        id: `m${Date.now()}`,\n        sender: currentUser.id,\n        receiver: selectedUser.id,\n        content,\n        timestamp: new Date().toISOString(),\n        status: 'sending'\n      };\n\n      // Ajouter le message localement avant d'obtenir une réponse du serveur\n      setMessages(prevMessages => [...prevMessages, newMessage]);\n\n      // Envoyer le message via socket si connecté\n      if (socket && connected) {\n        console.log('Émission du message via socket');\n        socket.emit('send_message', newMessage);\n      } else {\n        console.error('Socket non connecté, impossible d\\'envoyer le message');\n      }\n    } catch (error) {\n      console.error('Erreur lors de l\\'envoi du message:', error);\n    }\n  }, [selectedUser, currentUser, socket, connected]);\n\n  // Ajouter une réaction à un message\n  const handleAddReaction = useCallback(async (messageId, reaction) => {\n    console.log('Ajout d\\'une réaction:', reaction, 'au message:', messageId);\n    try {\n      if (!currentUser) {\n        console.error('Impossible d\\'ajouter une réaction: pas d\\'utilisateur courant');\n        return;\n      }\n\n      // Mettre à jour localement\n      setMessages(prevMessages => prevMessages.map(msg => msg.id === messageId ? {\n        ...msg,\n        reactions: [...(msg.reactions || []), {\n          reaction,\n          userId: currentUser.id,\n          timestamp: new Date().toISOString()\n        }]\n      } : msg));\n\n      // Envoyer via socket si connecté\n      if (socket && connected) {\n        console.log('Émission de la réaction via socket');\n        socket.emit('add_reaction', {\n          messageId,\n          reaction,\n          userId: currentUser.id\n        });\n      } else {\n        console.error('Socket non connecté, impossible d\\'envoyer la réaction');\n      }\n    } catch (error) {\n      console.error('Erreur lors de l\\'ajout de la réaction:', error);\n    }\n  }, [currentUser, socket, connected]);\n\n  // Répondre à un message\n  const handleReplyToMessage = useCallback(async (messageId, content) => {\n    console.log('Réponse au message:', messageId);\n    try {\n      if (!currentUser || !selectedUser) {\n        console.error('Impossible de répondre: pas d\\'utilisateur courant ou sélectionné');\n        return;\n      }\n      const parentMessage = messages.find(msg => msg.id === messageId);\n      if (!parentMessage) {\n        console.error('Message parent introuvable');\n        return;\n      }\n      const reply = {\n        id: `reply_${Date.now()}`,\n        sender: currentUser.id,\n        receiver: selectedUser.id,\n        content,\n        timestamp: new Date().toISOString(),\n        parentId: messageId,\n        parentMessage: {\n          id: parentMessage.id,\n          content: parentMessage.content\n        }\n      };\n\n      // Mettre à jour localement\n      setMessages(prevMessages => prevMessages.map(msg => msg.id === messageId ? {\n        ...msg,\n        replies: [...(msg.replies || []), reply]\n      } : msg));\n\n      // Envoyer via socket si connecté\n      if (socket && connected) {\n        console.log('Émission de la réponse via socket');\n        socket.emit('reply_to_message', {\n          messageId,\n          reply\n        });\n      } else {\n        console.error('Socket non connecté, impossible d\\'envoyer la réponse');\n      }\n    } catch (error) {\n      console.error('Erreur lors de la réponse au message:', error);\n    }\n  }, [currentUser, selectedUser, messages, socket, connected]);\n\n  // Forcer la reconnexion au serveur socket\n  const reconnect = useCallback(() => {\n    console.log('Tentative de reconnexion au serveur socket...');\n    if (socket) {\n      socket.disconnect();\n      socket = null;\n    }\n    connectSocket();\n\n    // Réenregistrer l'utilisateur après la connexion\n    if (currentUser) {\n      setTimeout(() => {\n        if (socket && socket.connected) {\n          socket.emit('register', currentUser);\n        }\n      }, 1000);\n    }\n  }, [connectSocket, currentUser]);\n  return /*#__PURE__*/_jsxDEV(ChatContext.Provider, {\n    value: {\n      onlineUsers,\n      fetchUsers,\n      selectedUser,\n      setSelectedUser,\n      messages,\n      loading,\n      handleSendMessage,\n      handleAddReaction,\n      handleReplyToMessage,\n      socketConnected: connected,\n      reconnect\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 322,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatProvider, \"rD/Kwdl2NZ2qU9lSqnhrnE6i25M=\");\n_c = ChatProvider;\nvar _c;\n$RefreshReg$(_c, \"ChatProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","useContext","useCallback","AuthContext","io","jsxDEV","_jsxDEV","ChatContext","SOCKET_URL","socket","ChatProvider","children","_s","currentUser","onlineUsers","setOnlineUsers","selectedUser","setSelectedUser","messages","setMessages","loading","setLoading","connected","setConnected","connectSocket","console","log","reconnectionAttempts","reconnectionDelay","timeout","on","id","error","reason","emit","socketId","users","Array","isArray","otherUsers","filter","user","isOnline","message","prevMessages","map","msg","data","messageId","reactions","reaction","userId","replies","reply","off","sender","receiver","fetchUsers","handleSendMessage","content","username","newMessage","Date","now","timestamp","toISOString","status","handleAddReaction","handleReplyToMessage","parentMessage","find","parentId","reconnect","disconnect","setTimeout","Provider","value","socketConnected","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/mehdycament/Bureau/app_message_symfony/chat-page/src/contexts/ChatContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect, useContext, useCallback } from 'react';\nimport { AuthContext } from './AuthContext';\nimport io from 'socket.io-client';\n\nexport const ChatContext = createContext();\n\n// URL du serveur socket.io\nconst SOCKET_URL = 'http://localhost:5001';\nlet socket;\n\nexport const ChatProvider = ({ children }) => {\n  const { currentUser } = useContext(AuthContext);\n  const [onlineUsers, setOnlineUsers] = useState([]);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [connected, setConnected] = useState(false);\n\n  // Fonction pour se connecter au serveur socket\n  const connectSocket = useCallback(() => {\n    if (!socket) {\n      console.log('Initialisation de la connexion socket...');\n      socket = io(SOCKET_URL, {\n        reconnectionAttempts: 5,\n        reconnectionDelay: 1000,\n        timeout: 10000\n      });\n\n      // Ecouter la connexion\n      socket.on('connect', () => {\n        console.log('Connecté au serveur socket avec id:', socket.id);\n        setConnected(true);\n      });\n\n      // Ecouter les erreurs de connexion\n      socket.on('connect_error', (error) => {\n        console.error('Erreur de connexion socket:', error);\n      });\n\n      // Ecouter la déconnexion\n      socket.on('disconnect', (reason) => {\n        console.log('Déconnecté du serveur socket. Raison:', reason);\n        setConnected(false);\n      });\n    }\n  }, []);\n\n  // Établir la connexion socket quand l'utilisateur est connecté\n  useEffect(() => {\n    if (currentUser) {\n      // Établir la connexion au serveur socket\n      connectSocket();\n      \n      if (socket) {\n        // Enregistrer l'utilisateur sur le serveur\n        console.log('Enregistrement de l\\'utilisateur:', currentUser);\n        socket.emit('register', {\n          ...currentUser,\n          socketId: socket.id\n        });\n        \n        // Configurer les écouteurs d'événements\n        \n        // Écouter les mises à jour des utilisateurs en ligne\n        socket.on('users_update', (users) => {\n          console.log('Utilisateurs en ligne reçus:', users);\n          \n          if (Array.isArray(users)) {\n            // Filtrer pour exclure l'utilisateur courant\n            const otherUsers = users.filter(user => \n              user.id !== currentUser.id && user.isOnline\n            );\n            console.log('Autres utilisateurs filtrés:', otherUsers);\n            setOnlineUsers(otherUsers);\n          } else {\n            console.error('Format incorrect pour users_update, attendu tableau, reçu:', typeof users);\n          }\n        });\n        \n        // Écouter les nouveaux messages\n        socket.on('new_message', (message) => {\n          console.log('Nouveau message reçu:', message);\n          setMessages(prevMessages => [...prevMessages, message]);\n        });\n        \n        // Confirmation d'envoi de message\n        socket.on('message_sent', (message) => {\n          console.log('Confirmation de message envoyé:', message);\n          setMessages(prevMessages => \n            prevMessages.map(msg => \n              msg.id === message.id ? message : msg\n            )\n          );\n        });\n        \n        // Écouter les nouvelles réactions\n        socket.on('new_reaction', (data) => {\n          console.log('Nouvelle réaction reçue:', data);\n          setMessages(prevMessages => \n            prevMessages.map(msg => \n              msg.id === data.messageId \n                ? { \n                    ...msg, \n                    reactions: [...(msg.reactions || []), { \n                      reaction: data.reaction, \n                      userId: data.userId \n                    }] \n                  } \n                : msg\n            )\n          );\n        });\n        \n        // Écouter les nouvelles réponses\n        socket.on('new_reply', (data) => {\n          console.log('Nouvelle réponse reçue:', data);\n          setMessages(prevMessages => \n            prevMessages.map(msg => \n              msg.id === data.messageId \n                ? { \n                    ...msg, \n                    replies: [...(msg.replies || []), data.reply] \n                  } \n                : msg\n            )\n          );\n        });\n      }\n    }\n    \n    return () => {\n      if (socket) {\n        console.log('Nettoyage des écouteurs d\\'événements socket');\n        socket.off('users_update');\n        socket.off('new_message');\n        socket.off('message_sent');\n        socket.off('new_reaction');\n        socket.off('new_reply');\n      }\n    };\n  }, [currentUser, connectSocket]);\n\n  // Charger les messages lorsqu'un utilisateur est sélectionné\n  useEffect(() => {\n    if (selectedUser) {\n      console.log('Utilisateur sélectionné:', selectedUser);\n      setLoading(true);\n      setMessages([]); // Réinitialiser les messages\n      \n      // Demander les messages précédents au serveur\n      if (socket && connected) {\n        socket.emit('get_messages', {\n          sender: currentUser.id,\n          receiver: selectedUser.id\n        });\n      }\n      \n      setLoading(false);\n    }\n  }, [selectedUser, currentUser, socket, connected]);\n\n  // Demander explicitement la liste des utilisateurs\n  const fetchUsers = useCallback(async () => {\n    console.log('Récupération des utilisateurs...');\n    if (socket && connected) {\n      socket.emit('get_users');\n      console.log('Demande de liste d\\'utilisateurs envoyée');\n    }\n    return onlineUsers;\n  }, [onlineUsers, socket, connected]);\n\n  // Envoyer un message\n  const handleSendMessage = useCallback(async (content) => {\n    if (!selectedUser || !currentUser) {\n      console.error('Impossible d\\'envoyer un message: pas d\\'utilisateur sélectionné ou courant');\n      return;\n    }\n    \n    console.log('Envoi d\\'un message à:', selectedUser.username);\n    \n    try {\n      const newMessage = {\n        id: `m${Date.now()}`,\n        sender: currentUser.id,\n        receiver: selectedUser.id,\n        content,\n        timestamp: new Date().toISOString(),\n        status: 'sending'\n      };\n      \n      // Ajouter le message localement avant d'obtenir une réponse du serveur\n      setMessages(prevMessages => [...prevMessages, newMessage]);\n      \n      // Envoyer le message via socket si connecté\n      if (socket && connected) {\n        console.log('Émission du message via socket');\n        socket.emit('send_message', newMessage);\n      } else {\n        console.error('Socket non connecté, impossible d\\'envoyer le message');\n      }\n    } catch (error) {\n      console.error('Erreur lors de l\\'envoi du message:', error);\n    }\n  }, [selectedUser, currentUser, socket, connected]);\n\n  // Ajouter une réaction à un message\n  const handleAddReaction = useCallback(async (messageId, reaction) => {\n    console.log('Ajout d\\'une réaction:', reaction, 'au message:', messageId);\n    \n    try {\n      if (!currentUser) {\n        console.error('Impossible d\\'ajouter une réaction: pas d\\'utilisateur courant');\n        return;\n      }\n      \n      // Mettre à jour localement\n      setMessages(prevMessages => \n        prevMessages.map(msg => \n          msg.id === messageId \n            ? { \n                ...msg, \n                reactions: [...(msg.reactions || []), { \n                  reaction, \n                  userId: currentUser.id,\n                  timestamp: new Date().toISOString()\n                }] \n              } \n            : msg\n        )\n      );\n      \n      // Envoyer via socket si connecté\n      if (socket && connected) {\n        console.log('Émission de la réaction via socket');\n        socket.emit('add_reaction', { \n          messageId, \n          reaction, \n          userId: currentUser.id \n        });\n      } else {\n        console.error('Socket non connecté, impossible d\\'envoyer la réaction');\n      }\n    } catch (error) {\n      console.error('Erreur lors de l\\'ajout de la réaction:', error);\n    }\n  }, [currentUser, socket, connected]);\n\n  // Répondre à un message\n  const handleReplyToMessage = useCallback(async (messageId, content) => {\n    console.log('Réponse au message:', messageId);\n    \n    try {\n      if (!currentUser || !selectedUser) {\n        console.error('Impossible de répondre: pas d\\'utilisateur courant ou sélectionné');\n        return;\n      }\n      \n      const parentMessage = messages.find(msg => msg.id === messageId);\n      \n      if (!parentMessage) {\n        console.error('Message parent introuvable');\n        return;\n      }\n      \n      const reply = {\n        id: `reply_${Date.now()}`,\n        sender: currentUser.id,\n        receiver: selectedUser.id,\n        content,\n        timestamp: new Date().toISOString(),\n        parentId: messageId,\n        parentMessage: {\n          id: parentMessage.id,\n          content: parentMessage.content\n        }\n      };\n      \n      // Mettre à jour localement\n      setMessages(prevMessages => \n        prevMessages.map(msg => \n          msg.id === messageId \n            ? { \n                ...msg, \n                replies: [...(msg.replies || []), reply] \n              } \n            : msg\n        )\n      );\n      \n      // Envoyer via socket si connecté\n      if (socket && connected) {\n        console.log('Émission de la réponse via socket');\n        socket.emit('reply_to_message', { messageId, reply });\n      } else {\n        console.error('Socket non connecté, impossible d\\'envoyer la réponse');\n      }\n    } catch (error) {\n      console.error('Erreur lors de la réponse au message:', error);\n    }\n  }, [currentUser, selectedUser, messages, socket, connected]);\n\n  // Forcer la reconnexion au serveur socket\n  const reconnect = useCallback(() => {\n    console.log('Tentative de reconnexion au serveur socket...');\n    if (socket) {\n      socket.disconnect();\n      socket = null;\n    }\n    connectSocket();\n    \n    // Réenregistrer l'utilisateur après la connexion\n    if (currentUser) {\n      setTimeout(() => {\n        if (socket && socket.connected) {\n          socket.emit('register', currentUser);\n        }\n      }, 1000);\n    }\n  }, [connectSocket, currentUser]);\n\n  return (\n    <ChatContext.Provider\n      value={{\n        onlineUsers,\n        fetchUsers,\n        selectedUser,\n        setSelectedUser,\n        messages,\n        loading,\n        handleSendMessage,\n        handleAddReaction,\n        handleReplyToMessage,\n        socketConnected: connected,\n        reconnect\n      }}\n    >\n      {children}\n    </ChatContext.Provider>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}